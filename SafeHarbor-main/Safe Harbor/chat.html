<!DOCTYPE html>
<html>
    <head>
        <title>Safe Harbor - Blog</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="homeStyle.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="chatStyle.css" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>

    </head>

    <body>
        <nav id="navbar" class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>                        
                    </button>

                    <a class="navbar-brand" href="#safeHarbor" style="color: black;">Safe Harbor</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav navbar-right">
                        <li  onclick="openNav()"><a href="#chat">Chat</a></li>
                        <li><a href="#profile">Perfil</a></li>
                        <li><a href="#about">Login</a></li>

                    </ul>
                </div>
            </div>
        </nav>

        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <a style="font-size: 20px;">Amigos:</a> 
            <ul id="userFriendsList">
            </ul>
        </div>
        <div id="main">
            <div>
                <h2 id="friendName">Pessoa 1</h2> 
                <p id="friendProfession"></p>

                <div style="height:350px; width:100%; overflow: auto;">

                    <div class="chat" id="chat">
                        <img src="/w3images/bandmember.jpg" alt="Avatar" style="width:100%;">
                        <p id="description">Hello. How are you today?</p>
                        <span class="time-right">11:00</span>
                      </div>
                      
                      <div class="chat darker" id="userChat">
                        <img src="/w3images/avatar_g2.jpg" alt="Avatar" class="right" style="width:100%;">
                        <p>Hey! I'm fine. Thanks for asking!</p>
                        <span class="time-left">11:01</span>
                      </div>
                </div>
            </div>

            <div class="send-message">
                <div style="margin-right: 40%; margin-left: 40%;">
                    <div class="message-wrapper">
                        <div class="message-text" contentEditable></div>
                    </div>   
                    <img class="send-button" src="send.png">
                </div>
            </div>
        </div>
    </body>

    <script>
        let userFriends = ["Nicoly", "Alana", "Nathan", "Carlos"]; 
        var i;
        for (i = 0; i < userFriends.length; i++ ) {

            var newLI = document.createElement("li"),
                displayUserFriendsList = document.getElementById("userFriendsList"), 
                newContent = document.createTextNode(userFriends[i]);
                newLI.appendChild(newContent);
                displayUserFriendsList.appendChild(newLI);
                console.log(userFriends[i]);  
        }

        let text = '{ "userFriend": "Nicoly",' +
            ' "userFriendProfession": "Psicóloga", ' +
            ' "messages" : [' +
            '{ "username": "Alana",' +
            ' "usernameFriend": "Nicoly",' +
            ' "userFriendProfession": "Psicóloga",' +
            ' "date": "17/05/22 - 22:10",' +
            ' "description": "Oi! Tudo bem? blá blá blá",' +
            ' "isUserMessage": true},' +
            '{ "firstName":"Anna" , "lastName":"Smith" },' +
            '{ "firstName":"Peter" , "lastName":"Jones" } ]}';

        let userChat = [
            {
                "username": "Alana", 
                "usernameFriend": "Nicoly", 
                "userFriendProfession": "Psicóloga",
                "date": "17/05/22 - 22:10", 
                "description": "Oi! Tudo bem? blá blá blá",
                "isUserMessage": true
            },
            {
                "username": "Alana", 
                "usernameFriend": "Nicoly", 
                "date": "17/05/22 - 22:10", 
                "description": "Oi! Tudo bem? blá blá blá",
                "isUserMessage": false
            }
        ]

        const obj = JSON.parse(text);
        console.log(obj);

        document.getElementById("friendName").innerHTML = obj.userFriend;
        document.getElementById("friendProfession").innerHTML = obj.userFriendProfession;

        var e;
        for (e = 0; e < obj.messages[2]; e++) {
            document.getElementById("description").innerHTML = obj.messages[e].description;
        }        

   

        console.log(userChat);

        function openNav() {
            document.getElementById("mySidenav").style.width = "250px";
            document.getElementById("main").style.marginLeft = "250px";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
        }
    </script>
</html>